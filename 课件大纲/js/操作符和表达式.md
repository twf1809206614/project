

# 操作符和表达式



### 一：操作符（运算符）

程序中需要对数据进行各种运算，以得到计算后的结果。

计算有很多种类型，不同计算方式需要使用不同的操作符。

注意，这里的计算不限于传统的数学计算，实际上数学运算只是编程运算中的一小部分。

常见运算符：

1：算术运算符

2：比较运算符

3：逻辑运算符

4：三目运算符（条件运算符，三元运算符）

5：其他运算符



操作数：用于计算的数据叫运算符的操作数。

根据操作数的不同个数，还可以把运算符分为：

1：单目运算符

2：双目运算符

3：三目运算符



大多数的运算符都是双目运算符，小部分是单目运算符，三目运算符只有一个。



### 二：表达式

编程本质上都是在处理数据和数据逻辑。

那程序是如何表示数据的？程序中的数据都是怎么获得的？

程序中的所有数据都是通过表达式获得的。表达式是程序中最基本的组成单元。

任何的数据，程序都是通过表达式来获取或者表示的。

表达式分类：

#### 1：原始表达式

单个常量和单个变量。

如果是object类型的常量，一般叫直接量，也可以看作原始表达式。

对象的属性访问和数组的元素访问，也可以看作原始表达式。

#### 2：计算表达式

操作数 + 操作符构成的表达式。

操作数本身是数据，因此操作数本身也可以通过任意的表达式来提供。

```javascript
// 1+1 => 这是两个常量1和运算符 + 构成的表达式。
// 第一个操作数1同时也可以通过表达式0.5+0.5来提供，写成 （0.5+0.5）+1
```

#### 3：函数调用表达式

函数调用也可以提供数据，构成函数调用表达式。

```javascript
// Math.random() => 这是函数调用表达式，它和其他表达式一样提供一个结果，赋值给变量res
let res = Math.random();
```



表达式的返回值：

表达式经过计算得到的结果就是表达式的返回值。

**表达式一定有返回值。**

```javascript
// 1+1 计算的结果是2，因此我们说表达式 1+1的返回值是2
// 以下代码的意义为：把1+1的返回值赋值给变量x。
let x = 1+1;
// 以下代码的意义为：把Math.random()的返回值赋值给变量res
let res = Math.random();
```



### 三：算术运算符

小学就学过的是：+，-，*，/，计算顺序也是先乘除，后加减。

1.1.1：取余（取模）：%

取余运算符，求两个操作数的余数。

```JavaScript
// 4/2 => 求商，得2
// 4%2 => 求余数，因为可以整除，余数为0，因此计算得0
// 2%4 => 求余得2.
// 3%5 => 求余得3.
// 0%5 => 求余得0.
// 结论：如果较小的数取余较大的数，结果是较小的数
```

1.1.2：++

自增。单目运算符。分为前自增和后自增。计算后变量的值+1。只能操作变量。是一种语法糖。

```javascript
let x = 10;
// 前自增
++x;
// 后自增
x++;

// 不管是前自增还是后自增，x的值经过计算后都+1
```

前自增和后自增在进行赋值时会有区别。

```javascript
let x = 10;
// 如果是后自增。y的值是10.x的值是11
let y = x++;
// 如果是前自增，y的值是11.x的值是11
let y = ++x;

// 为什么会这样？

//let y = x++;可以用完整的赋值逻辑表示如下：
// 先把x赋值给y
let y = x;
// 再把x加1
x = x + 1;

//  y = ++x;可以用完整的赋值逻辑表示如下：
// 先把x加1
x = x + 1;
// 再把x赋值给y
let y = x;

```

总结：前置++，计算结果是+1之后的值。后置++，计算结果是+1之前的值。

难点：区分x++，++x和x的区别。



### 四：比较运算符

初中就学过的：>,<,>=,<=

布尔值：一种JavaScript的数据类型，表示真假，对错，有无。

比较运算符计算得到的结果都是布尔值。

1.2.1 值等 ==

判断两个数是否相等，用的是 == ，注意 = 是赋值，不是判断相等。

如果两个操作数都是object类型。则比较的是两个对象是否是同一个对象。

```javascript
// 比较两个数字的值是否相等
let x = 10;
let y = 20;
console.log(x == y);//false

// 比较两个对象是否是同一个对象。
let obj1 = {};
let obj2 = {};
console.log(obj1 == obj2);//false
```



1.2.2 全等 ===

判断两个数的值和类型是否全等。值和数据类型必须都一致才会返回true

```javascript
let x = 1;
let str = '1';
console.log(x == str);// true
// x的数据类型是number，str的数据类型是string，类型不一样。因此是false。
console.log(x === str);// false
```



1.2.3 值不等 !=

判断两个数据的值是否相等。

```javascript
let x = 10;
let y = 20;
console.log(x != y);//true
```



1.2.4 值不等或者类型不等 !==

判断两个数据的值不等或者类型不等，只要有一个不等，都返回true，如果全部相等返回false

```JavaScript
let x = 2;
let str = '2';
// 值等，因此是false
console.log(x != str);// false
// 值等，但是类型不等
console.log(x !== str);// true

let x = 2;
let y = 2;
// 值和类型都相等。
console.log(x !== y);// false
```



### 五：判断

判断不是表达式，是控制结构中的一种。让我们可以实现类似如果....否则....这样的程序逻辑。

语法：

```JavaScript
if(条件){
	条件为真需要做的事
}else{
	条件为假需要做的事
}
```

其中条件可以由任何表达式提供。

当这个表达式的返回值是true时执行第一个代码块。

当返回值是false时，执行第二个代码块。



几种拓展的表现形式：

#### 1：只有如果，没有否则

```JavaScript
if(条件){
	条件为真做的事情
}

// 这种写法可以省略{}，但是极度不推荐
```

#### 2：有很多的条件判断

```JavaScript
if(条件1){
	条件1为真做的事情
}else if(条件2){
	条件2为真做的事情
}
.........
else{
	所有条件都为假时做的事情。
}

// 这种写法，如果多个条件同时为真，则只执行第一个真条件匹配的代码段，其他的代码段不执行
```

#### 3：switch判断

switch判断有时候可以简化多个 if.else if的判断书写。

```javascript
// 类似以下的判断形势可以用switch代替
if(变量 == 值1){
	相等时做的事情
}else if(变量 == 值2){
	相等时做的事情
}
.........
else{
	所有值都不等时做的事情。
}

// 以下写法，break不能省略，它可以防止多个值都为真时错误的执行多个语句
// default 的作用类似于最后一个else。
switch(变量){
	case 值1:
		变量等于值1时做的事情;
		break;
	case 值2:
		变量等于值2时做的事情;
		break;
	........
	default:
		所有值都不等时做的事情。
}
```



### 六：隐式转换

#### 6.1 转换现象

很多时候，操作数的数据类型是有规定的。

比如，算术运算符的操作数的数据类型必须是数字，因为不是数字无法计算。

但是，js在书写上却允许不是数字的数据进行算术运算。

因为js是弱类型的编程语言，对数据类型不敏感，在需要的时候会自动进行类型转换。

```JavaScript

console.log('1' * 2 );//结果是2
// '1' * 2 => 第一个操作数是字符串 '1',不是数字，因此理论上不会进行相乘计算。
// 为了让以上运算正常执行，js自动把字符串 '1'转换成了数字1.实际进行的计算是 1*2

```

另外，比较运算符的操作数也应该是数字，如果不是，js会自动转换为数字在进行比较运算。

```JavaScript

console.log('1' < 2);// 结果是true
// 理论上字符串 '1' 是不能和数字2进行比较大小的，为了让运算完成，js会自动把'1'转换成数字1以后再比较。

```

判断语句的判断条件的值应该是布尔值，如果不是，js会自动转换条件的值为布尔值，然后再判断

```JavaScript
// 100是数字，不是布尔值，为了让判断执行，js会把100转换为布尔值true，然后再进行判断
if(100){
	console.log('100是true')
}
```

100转换为布尔值为什么是true,为什么不是false?什么东西转换为布尔值是false?

**重点:** js的世界中,只有5种常量转换为布尔值是false,其余都是true;

这5个值是：**NaN，0，'' (空字符串)，undefined，null。**



在js的世界中，隐式转换无处不在。再比如，alert(),括号内的值应该是字符串,如果不是,js会自动转换为字符串.

```JavaScript

// window是对象,不是字符串,因此js自动把window转换成了字符串[Object object]
alert(window);// [Object object]

```



#### 6.2 显示转换

对应的数据类型的转换方法：

1：把任意值转换为number类型 Number (待转换的值)

2：把任意值转换为string类型 String (待转换的值)(还有很多)

3：把任意值转换为boolean类型 Boolean (待转换的值)

不存在把其他值转换为对象的方法。因为万物皆对象。



#### 6.3 转换规律

1：算术运算符

默认会把不是数字的操作数隐式转换为number类型。

例外：

**如果是 + 操作符，如果有一个操作数是字符串，则把另一个操作数隐式转换为字符串，**

**然后进行字符串拼接操作。**

```JavaScript
'1' + 1 => 结果是'11',而不是2
```



2：比较运算符

默认会把不是数字的操作数隐式转换为number类型。

例外：

**如果是 == 操作符，如果比较的两个操作都是对象，则比较两个对象是不是同一个对象，而不会进行隐式转换。**



3：判断条件

默认会把判断()内的值转换为布尔值。没有例外。

会转换为布尔值的5个常量：**NaN，0，空字符串，undefined，null**



#### 6.4 编程经验

利用隐式转换转换字符串为数字。

```javascript

'2'+3 因为js默认会把3转换为 '3',因此结果是'23',如果我们希望结果是5，则需要把 '2'转换为数字，再+3
可以这样做：'2'*1+3 
这样先计算'2'*1,这样js会把'2'转换为2，乘1得2，再+3得5

```

利用隐式转换转换其他值为字符串。

```javascript

true + 2 因为js默认会把true转换为数字1，因此结果是3，如果我们希望结果是true2，则需要把true转换为字符串
可以这样做：true+''+2
这样先计算true+''，js会把true隐式转换为'true',再+2，得'true2'

```









